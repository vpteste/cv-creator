/* PreviewPanel.css - Vertical Multi-page Layout */
.preview-panel-container {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  background-color: #e0e0e0;
  position: relative;
  overflow: hidden;
}

.scroll-wrapper {
  flex-grow: 1;
  overflow-y: auto;
  padding: 0 10px 30px 10px; /* Removed top padding */
}

.zoom-wrapper {
  transform-origin: top center;
  width: 100%;
  display: flex;
  justify-content: center;
}

.a4-preview {
  width: 210mm;
  min-height: 297mm; /* Ensures at least one page is visible */
  background: white;
  box-shadow: 0 5px 20px rgba(0,0,0,0.2);
  position: relative;
  /* height is auto */
}

.page-break-indicator {
  position: absolute;
  left: -70px;
  right: -70px;
  height: 1px;
  border-top: 1px dashed #ff8a80;
}

.page-break-indicator::before {
  content: attr(data-page);
  position: absolute;
  left: 5px;
  top: -10px;
  background-color: #ff8a80;
  color: white;
  padding: 2px 6px;
  font-size: 11px;
  font-weight: bold;
  border-radius: 4px;
}

.page-indicator {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background-color: rgba(0, 0, 0, 0.75);
  color: white;
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 500;
  z-index: 10;
  pointer-events: none;
}

/* Basic CV Content Styles */
.cv-header {
  display: flex;
  align-items: center;
  padding-bottom: 15px;
  border-bottom: 2px solid #eee;
  margin-bottom: 20px;
}

.cv-header.photo-pos-left {
  flex-direction: row;
}
.cv-header.photo-pos-left .profile-photo {
  order: 1;
  margin-right: 20px;
}
.cv-header.photo-pos-left .header-main {
  order: 2;
}

.cv-header.photo-pos-right {
  flex-direction: row;
}
.cv-header.photo-pos-right .profile-photo {
  order: 2;
  margin-left: 20px;
}
.cv-header.photo-pos-right .header-main {
  order: 1;
  text-align: right;
}

.cv-header.photo-pos-top {
  flex-direction: column;
  text-align: center;
}
.cv-header.photo-pos-top .profile-photo {
  margin-bottom: 15px;
}

/* Modern Orange Template Styles */
.cv-container-modern-orange {
  padding-top: 15px; /* Add some space for the top border */
}

/* Dark Sidebar Diamond (DSD) Template Styles */
.template-dark-sidebar-diamond .sidebar {
    background-color: #0d1e37;
    color: #fff;
}
.template-dark-sidebar-diamond .main-content .cv-section h3 {
    color: #0d1e37 !important;
    border-bottom-color: #0d1e37 !important;
}
.template-dark-sidebar-diamond .sidebar .cv-section h3 {
    color: #fff !important;
    border-bottom-color: #fff !important;
}

.photo-img {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid #eee;
}

.cv-body { padding: 15mm; flex-grow: 1; }
.cv-section { margin-bottom: 15px; }
.cv-section h3 { display: flex; align-items: center; gap: 10px; border-bottom: 2px solid #333; padding-bottom: 5px; margin-bottom: 10px; }
.item-entry { margin-bottom: 10px; }
.item-entry h4 { margin: 0 0 2px 0; }
.item-entry h5 { margin: 0 0 5px 0; font-style: italic; color: #555; }
.skills-list { columns: 2; gap: 20px; }

/* Mobile controls */
.mobile-back-btn, .mobile-zoom-controls { display: none; }

/* Template-specific styles */
.cv-container-bicolor { display: flex; height: 100%; }
.sidebar { width: 35%; padding: 20px; }
.main-content { width: 65%; padding: 20px; }
.profile-photo-bicolor { width: 120px; height: 120px; border-radius: 50%; overflow: hidden; margin: 0 auto 20px; }
.profile-photo-bicolor img { width: 100%; height: 100%; object-fit: cover; }
.contact-info-bicolor h1, .contact-info-bicolor h2 { text-align: center; }
.cv-section-sidebar { margin-bottom: 20px; }
.cv-container-bicolor.reversed { flex-direction: row-reverse; }
.profile-photo-rect { width: 100%; height: 150px; overflow: hidden; margin-bottom: 20px; }
.profile-photo-rect img { width: 100%; height: 100%; object-fit: cover; }
.header-reversed { padding: 20px; text-align: center; }
.contact-info-reversed { display: flex; justify-content: center; gap: 15px; font-size: 0.9em; margin-top: 10px; }

.section-container {
  position: relative;
}

/* --- Template: Classique Simple (default) Photo Alignment --- */

/* Default is horizontal, side-by-side */
.cv-container-default .cv-header {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 20px;
  padding: 20px 15mm 15px 15mm;
}

.cv-container-default .header-section-stylish {
  flex-grow: 1;
}

/* Position: Left (Default behavior, but explicit) */
.cv-container-default .cv-header.photo-pos-left {
   flex-direction: row;
}
.cv-container-default .cv-header.photo-pos-left .profile-pic-wrapper {
  order: -1;
}
.cv-container-default .cv-header.photo-pos-left .header-section-stylish {
  text-align: left;
}


/* Position: Right */
.cv-container-default .cv-header.photo-pos-right {
  flex-direction: row;
}
.cv-container-default .cv-header.photo-pos-right .profile-pic-wrapper {
  order: 1;
}
.cv-container-default .cv-header.photo-pos-right .header-section-stylish {
  text-align: right;
}

/* Position: Center */
.cv-container-default .cv-header.photo-pos-center {
  flex-direction: column;
  text-align: center;
}

/* --- Template: Classique Simple (default) Tweaks --- */

/* Uppercase section titles */
.cv-container-default .cv-section h3 {
  text-transform: uppercase;
}

/* Increase photo size */
.cv-container-default .photo-img {
  width: 120px;
  height: 120px;
}

/* Reduce top padding on body */
.cv-container-default .cv-body {
  padding-top: 0;
}

/* --- Template: CV Colonne Sombre (dark-sidebar-diamond) Tweaks --- */

/* Increase photo size */
.template-dark-sidebar-diamond .photo-img {
  width: 130px;
  height: 130px;
  border: 4px solid #ffffff; /* Add a white border to pop against the dark sidebar */
}

/* Style the skill/language bars for the dark sidebar */
.template-dark-sidebar-diamond .sidebar .skill-bar-container {
  background-color: rgba(255, 255, 255, 0.2); /* A semi-transparent white background */
  border-radius: 5px;
  height: 8px;
  margin-top: 5px;
}

.template-dark-sidebar-diamond .sidebar .skill-bar {
  background-color: #ffffff; /* White bar */
  height: 100%;
  border-radius: 5px;
}



/* Force single column for skills/languages list in the sidebar */
.template-dark-sidebar-diamond .sidebar .skills-list {
  columns: 1;
}

/* --- Template: CV Elégant Turquoise (stylish-teal-orange) --- */

.template-stylish-teal-orange .sidebar {
  position: relative; /* Needed for positioning child elements */
  padding-top: 0; /* Remove padding to let banner touch the top */
}

.template-stylish-teal-orange .top-orange-banner {
  height: 80px;
}

.template-stylish-teal-orange .profile-photo-container {
  position: relative;
  width: 160px;
  height: 160px;
  border-radius: 50%;
  border: 5px solid #fff;
  margin: -80px auto 20px auto; /* Pulls the photo up over the banner */
  overflow: hidden;
  background-color: #fff; /* Background for the placeholder */
  z-index: 2;
}

.template-stylish-teal-orange .profile-photo {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* --- Template: CV Bannière Rouge (red-top-banner) --- */

.cv-container-red-top-banner {
  padding: 0 15mm; /* Ajoute un padding horizontal */
}


.template-red-top-banner .profile-photo-circle {
  width: 150px;
  height: 150px;
  border-radius: 50%;
  overflow: hidden;
  border: 6px solid #fff;
  box-shadow: 0 0 15px rgba(0,0,0,0.2);
}

.template-red-top-banner .profile-photo-circle img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.template-red-top-banner .profile-photo-circle .photo-img {
  width: 100%;
  height: 100%;
  border: none; /* Override default photo border */
}

/* --- Red Banner Header Layout --- */

/* Default (Center) Position */
.template-red-top-banner.photo-pos-center .header-main {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  position: relative;
  margin-top: 20px; /* Adjusted from negative margin */
  margin-bottom: 20px;
}

/* Left & Right Positions */
.template-red-top-banner.photo-pos-left .header-main,
.template-red-top-banner.photo-pos-right .header-main {
  display: flex;
  flex-direction: row;
  align-items: center; /* Vertically center photo and text block */
  justify-content: space-between; /* Push items apart */
  position: relative;
  margin-top: 20px; /* Adjusted from negative margin */
  margin-bottom: 20px;
  padding: 0 15mm; /* Add padding to align with body */
  box-sizing: border-box;
  width: 100%;
}

/* Order for Left Position */
.template-red-top-banner.photo-pos-left .profile-photo-circle {
  order: 1;
}
.template-red-top-banner.photo-pos-left .header-info {
  order: 2;
  text-align: left;
}

/* Order for Right Position */
.template-red-top-banner.photo-pos-right .profile-photo-circle {
  order: 2;
}
.template-red-top-banner.photo-pos-right .header-info {
  order: 1;
  text-align: right;
}

/* --- Template: CV Bannière Rouge (red-top-banner) Tweaks --- */

/* Set padding for the main body */
.template-red-top-banner .banner-body {
  padding: 20px 15mm; /* 20px top/bottom, 15mm left/right for A4 feel */
}

/* --- Template: CV Elégant Bleu Nuit Tweaks --- */

/* Uppercase section titles */
.cv-container-cv-elegant-bleu-nuit .cv-section h3 {
  text-transform: uppercase;
}

/* Increase photo size */
.cv-container-cv-elegant-bleu-nuit .photo-img {
  width: 140px;
  height: 140px;
}

/* Override for CV Elegant Bleu Nuit Hobbies */
.cv-container-cv-elegant-bleu-nuit .sidebar .hobby-item-text {
  background-color: #f0f0f0; /* Restore light background */
  color: #333333; /* Use a dark grey/black for text */
}



/* --- Print-specific styles for PDF Generation --- */
@media print {
  /* Tell the browser that the body is the print container */
  body {
    width: 210mm;
    height: 297mm;
  }

  /* Hide unnecessary UI elements when printing */
  .settings-panel, .floating-actions, .mobile-view-toggle, .settings-toggle-button, .contextual-toolbar {
    display: none !important;
  }

  /* Ensure the CV container takes up the full page */
  .a4-preview {
    box-shadow: none;
    margin: 0;
    padding: 0;
    width: 100%;
    min-height: 100%;
    height: auto;
  }

  /* Avoid breaking pages inside these elements */
  .cv-section, .item-entry, .reference-item, .award-item {
    page-break-inside: avoid;
  }

  /* Encourage breaking pages BEFORE a major section title */
  .cv-section h3 {
    page-break-before: auto; /* Let the browser decide, but it's a good hint */
    page-break-after: avoid; /* Don't break right after a title */
  }

  /* Hide drag-and-drop handles in the PDF */
  .drag-handle {
    display: none !important;
  }

  /* Helper class to hide elements during PDF generation */
  .is-generating-pdf .drag-handle {
    display: none !important;
  }
}

/* --- Template: CV Contemporain (elegant-parisien) --- */

.template-elegant-parisien .header-main {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 30px;
  padding: 20px 15mm 20px 15mm;
  border-bottom: 1px solid #eee;
}

.template-elegant-parisien .profile-photo-container {
  flex-shrink: 0; /* Prevent photo from shrinking */
}

.template-elegant-parisien .photo-img {
  width: 150px;
  height: 150px;
  border-radius: 50%;
}

.template-elegant-parisien .header-info {
  text-align: left;
}

/* Reduce space between name/title and info tags */
.template-elegant-parisien .header-info .name-title {
  margin-bottom: 8px;
}

.template-elegant-parisien .header-info .job-title-header {
  margin-top: 0;
  margin-bottom: 20px; /* Space before the info tags */
}

/* Reduce empty space above the main content */
.template-elegant-parisien .cv-body {
  padding-top: 20px; /* Reduce from default 15mm */
}

/* --- Template: CV Contemporain (elegant-parisien) Tweaks --- */

/* Force single-column layout for skills list */
.template-elegant-parisien .skills-section ul {
  columns: 1;
  -webkit-columns: 1;
  -moz-columns: 1;
}

/* --- Loading Overlay --- */
.loading-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(255, 255, 255, 0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 100;
  transition: opacity 0.2s ease-in-out;
}
